@tailwind base;
@tailwind components;
@tailwind utilities;

/* Calibre Font Family */
@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-thin.woff2') format('woff2');
  font-weight: 100;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-thin-italic.woff2') format('woff2');
  font-weight: 100;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-light.woff2') format('woff2');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-light-italic.woff2') format('woff2');
  font-weight: 300;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-regular-italic.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-medium.woff2') format('woff2');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-medium-italic.woff2') format('woff2');
  font-weight: 500;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-semibold.woff2') format('woff2');
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-semibold-italic.woff2') format('woff2');
  font-weight: 600;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-bold-italic.woff2') format('woff2');
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-black.woff2') format('woff2');
  font-weight: 900;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Calibre';
  src: url('/fonts/calibre-black-italic.woff2') format('woff2');
  font-weight: 900;
  font-style: italic;
  font-display: swap;
}

/* Touch device handling - disable sticky hover, use active states with fade-out */
@media (hover: none) {
  /* Disable all hover background states on touch devices using attribute selector */
  [class*="hover:bg-"]:hover {
    background-color: inherit !important;
  }
  
  /* Also handle dark mode hover states */
  .dark [class*="dark:hover:bg-"]:hover {
    background-color: inherit !important;
  }
}

/* Smooth transitions for interactive elements */
button,
a,
[role="button"],
tr {
  transition: background-color 150ms ease-out, opacity 150ms ease-out;
}

/* Base styles for the application */
@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
  }

  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
  }

  body {
    @apply bg-[#F5F1EB] text-neutral-900 antialiased;
  }

  .dark body {
    @apply bg-neutral-950 text-neutral-50;
  }
}

/* Custom prose styles for better readability */
@layer components {
  /* Use semibold for bold, with small-caps for ALL CAPS text to match x-height */
  .prose strong,
  .prose b {
    font-weight: 500;
    @apply leading-tight text-neutral-700 dark:text-neutral-300;
  }

  .prose p {
    font-weight: 300;
    @apply text-[24px] leading-tight text-neutral-800 dark:text-neutral-400;
    margin-top: 0 !important;
  }

  .prose li {
    font-weight: 300;
    @apply text-[24px] leading-tight text-neutral-800 dark:text-neutral-400;
  }

  .prose h1,
  .prose h1 a {
    @apply text-[28px] leading-normal;
    font-weight: 600 !important;
    margin-bottom: 0 !important;
    margin-top: 3.0em !important;
  }

  .prose h2,
  .prose h2 a {
    @apply text-[24px] leading-tight;
    font-weight: 600 !important;
    margin-bottom: 0.1em !important;
    margin-top: 0.5em !important;
  }

  .prose h3,
  .prose h3 a {
    @apply text-[28px] leading-tight text-neutral-800 dark:text-neutral-300;
    text-transform: uppercase;
    font-variant-caps: all-small-caps;
    font-weight: 500 !important;
    margin-top: 1.25em !important;
    margin-bottom: 0.5em !important;
  }

  .prose h4,
  .prose h4 a {
    @apply text-[16px] leading-tight;
    font-weight: 200 !important;
  }

  /* Offset anchor links to account for sticky header (h-16 = 4rem) */
  .prose h1[id],
  .prose h2[id],
  .prose h3[id],
  .prose h4[id],
  .prose h5[id],
  .prose h6[id] {
    @apply scroll-mt-20;
  }

  /* Table border styling */
  .prose tr {
    @apply border-b border-neutral-200 dark:border-neutral-800;
  }

  /* Remove underline from table links */
  .prose td a {
    @apply no-underline;
  }

  /* Collapsible sections (details/summary) */
  .prose details {
    @apply my-4 rounded-lg border border-neutral-200 dark:border-neutral-800;
  }

  .prose details summary {
    @apply cursor-pointer px-4 py-3 font-medium text-neutral-700 dark:text-neutral-300;
    @apply hover:bg-neutral-50 dark:hover:bg-neutral-900;
    @apply select-none list-none;
    @apply relative;
  }

  .prose details summary::-webkit-details-marker {
    display: none;
  }

  .prose details summary::after {
    content: "â–¶";
    @apply absolute text-xs transition-transform;
    right: 1.25rem;
    top: 50%;
    transform: translateY(-50%);
  }

  .prose details[open] summary::after {
    transform: translateY(-50%) rotate(90deg);
  }

  .prose details > *:not(summary) {
    @apply px-4;
  }

  /* Remove gap between summary and table */
  .prose details > div:first-of-type {
    @apply mt-0;
  }

  .prose details table {
    @apply my-0;
  }

  /* Footnotes section styling */
  .prose .footnotes {
    @apply mt-12 border-t border-neutral-200 pt-6 dark:border-neutral-700;
  }

  .prose .footnotes ol {
    @apply text-[14px] leading-relaxed text-neutral-500 dark:text-neutral-400;
  }

  .prose .footnotes li {
    @apply text-[14px] leading-relaxed text-neutral-500 dark:text-neutral-400;
  }

  .prose .footnotes p {
    @apply text-[14px] leading-relaxed text-neutral-500 dark:text-neutral-400;
    font-weight: 400;
  }

  /* Footnote reference (superscript number in text) */
  .prose a[data-footnote-ref] {
    @apply text-[12px] text-neutral-400 no-underline hover:text-neutral-600 dark:hover:text-neutral-300;
  }

  /* Footnote backref (arrow back to text) */
  .prose a[data-footnote-backref] {
    @apply ml-1 text-neutral-400 no-underline hover:text-neutral-600 dark:hover:text-neutral-300;
  }
}

/* Code block styles for rehype-pretty-code */
@layer components {
  /* Code block container from rehype-pretty-code */
  [data-rehype-pretty-code-figure] {
    @apply my-6 overflow-hidden rounded-lg border border-neutral-200 dark:border-neutral-800;
  }

  [data-rehype-pretty-code-figure] pre {
    @apply overflow-x-auto p-4;
  }

  [data-rehype-pretty-code-figure] code {
    @apply grid text-sm;
  }

  /* Line highlighting */
  [data-rehype-pretty-code-figure] .line--highlighted {
    @apply -mx-4 border-l-2 border-indigo-500 bg-indigo-500/10 px-4;
  }

  /* Word highlighting */
  [data-rehype-pretty-code-figure] .word--highlighted {
    @apply rounded bg-indigo-500/20 p-1;
  }

  /* Code block title (filename) */
  [data-rehype-pretty-code-title] {
    @apply border-b border-neutral-200 bg-neutral-100 px-4 py-2 text-sm font-medium text-neutral-700 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-300;
  }
}

